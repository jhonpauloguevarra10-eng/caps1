<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Video Conferencing App</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Landing Page -->
  <div id="landing-page" class="page">
    <div class="landing-container">
      <div class="landing-card">
        <div class="landing-left">
          <h1 class="hero-title">VideoMeet</h1>
          <p class="hero-sub">Premium video conferencing designed for seamless collaboration</p>
          
          <div class="cta-row">
            <button id="btn-new-meeting" class="btn btn-primary" style="padding: 14px 32px; border-radius: 10px; font-weight: 600; font-size: 1rem;">
              â• Start Meeting
            </button>
          </div>
          
          <div class="join-section" style="margin-top: 28px;">
            <p style="color: var(--muted); font-size: 0.9rem; margin-bottom: 10px; font-weight: 500;">Join via link</p>
            <div style="display: flex; gap: 8px;">
              <input 
                type="text" 
                id="meeting-link-input" 
                class="muted-input" 
                placeholder="Paste meeting code or link..."
                autocomplete="off"
                style="flex: 1; padding: 12px 14px; border-radius: 10px;"
              >
              <button id="btn-join-from-link" class="btn btn-primary" style="padding: 12px 24px; border-radius: 10px; font-weight: 600;">
                Join
              </button>
            </div>
          </div>
        </div>
        
        <div class="landing-right">
          <div class="features">
            <div class="feature">
              <div class="icon">ğŸ¥</div>
              <div><strong>Crystal Clear Video</strong><br><span style="font-size: 0.85rem; color: var(--muted);">Up to HD</span></div>
            </div>
            <div class="feature">
              <div class="icon">ğŸ¤</div>
              <div><strong>Crystal Audio</strong><br><span style="font-size: 0.85rem; color: var(--muted);">Noise cancellation</span></div>
            </div>
            <div class="feature">
              <div class="icon">ğŸ’¬</div>
              <div><strong>Real-time Chat</strong><br><span style="font-size: 0.85rem; color: var(--muted);">Stay connected</span></div>
            </div>
            <div class="feature">
              <div class="icon">ğŸ”’</div>
              <div><strong>Secure & Private</strong><br><span style="font-size: 0.85rem; color: var(--muted);">End-to-end safe</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Meeting Setup Page -->
  <div id="setup-page" class="page hidden">
    <div class="setup-container">
      <h2>Prepare for Meeting</h2>
      
      <div class="setup-content">
        <!-- Video Preview -->
        <div class="preview-section">
          <video id="setup-video" class="video-preview" autoplay muted playsinline></video>
          <div class="video-label">Camera Preview</div>
        </div>

        <!-- Controls -->
        <div class="setup-controls">
          <!-- Username Input -->
          <div class="control-group">
            <label for="username-input">Your Name</label>
            <input 
              type="text" 
              id="username-input" 
              class="input-field" 
              placeholder="Enter your name..."
              maxlength="30"
              autocomplete="off"
            >
          </div>

          <!-- Camera Selection -->
          <div class="control-group">
            <label for="camera-select">Camera</label>
            <select id="camera-select" class="input-field">
              <option>Loading cameras...</option>
            </select>
          </div>

          <!-- Microphone Selection -->
          <div class="control-group">
            <label for="microphone-select">Microphone</label>
            <select id="microphone-select" class="input-field">
              <option>Loading microphones...</option>
            </select>
          </div>

          <!-- Media Controls -->
          <div class="media-toggles">
            <button id="toggle-camera-setup" class="btn btn-icon-toggle btn-active" title="Camera">
              <span class="icon">ğŸ“·</span>
              <span class="label">Camera On</span>
            </button>
            <button id="toggle-mic-setup" class="btn btn-icon-toggle btn-active" title="Microphone">
              <span class="icon">ğŸ¤</span>
              <span class="label">Mic On</span>
            </button>
          </div>

          <!-- Action Buttons -->
          <div class="setup-actions">
            <button id="btn-back" class="btn btn-secondary">Back</button>
            <button id="btn-join-meeting" class="btn btn-primary">Join Meeting</button>
          </div>

          <!-- Error Message -->
          <div id="setup-error" class="error-message hidden"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Meeting Page -->
  <div id="meeting-page" class="page hidden">
    <div class="meeting-container">
      <!-- Video Grid -->
      <div class="video-grid-container">
        <div id="video-grid" class="video-grid"></div>
      </div>

      <!-- Active Speaker Info -->
      <div id="active-speaker-info" class="active-speaker-info hidden">
        <span class="speaker-icon">ğŸ”Š</span>
        <span id="speaker-name">User Name</span>
      </div>

      <!-- Control Bar -->
      <div class="control-bar">
        <div class="controls-left">
          <button id="btn-toggle-mic" class="btn btn-control" title="Mute/Unmute">
            <span class="icon">ğŸ¤</span>
          </button>
          <button id="btn-toggle-camera" class="btn btn-control" title="Turn Camera On/Off">
            <span class="icon">ğŸ“·</span>
          </button>
          <button id="btn-share-link" class="btn btn-control" title="Copy Meeting Link">
            <span class="icon">ğŸ”—</span>
          </button>
        </div>

        <div class="controls-center">
          <button id="btn-toggle-chat" class="btn btn-control btn-danger" title="Leave Meeting">
            <span class="icon">ğŸ’¬</span>
            <span id="chat-notification-badge" class="notification-badge hidden">0</span>
          </button>
          <button id="btn-leave" class="btn btn-control btn-danger" title="Leave Meeting">
            <span class="icon">ğŸ“</span>
          </button>
          <button id="btn-fullscreen" class="btn btn-control" title="Fullscreen">
            <span class="icon">ğŸ–¥ï¸</span>
          </button>
        </div>

        <div class="controls-right">
          <button id="btn-end-meeting" class="btn btn-control btn-danger" title="End Meeting (Host)">
            <span class="icon">ğŸ›‘</span>
          </button>
        </div>
      </div>

      <!-- Chat Sidebar -->
      <div id="chat-panel" class="chat-panel hidden">
        <div class="chat-header">
          <h3>Chat</h3>
          <button id="btn-close-chat" class="btn-close">âœ•</button>
        </div>
        <div id="chat-messages" class="chat-messages"></div>
        <div class="chat-input-area">
          <input 
            type="text" 
            id="chat-input" 
            class="chat-input" 
            placeholder="Type a message..."
            autocomplete="off"
          >
          <button id="btn-send-message" class="btn-send">Send</button>
        </div>
      </div>

      <!-- Meeting Info Toast -->
      <div id="meeting-toast" class="toast hidden">
        <span id="toast-message">Toast message</span>
      </div>

      <!-- Copy Notification -->
      <div id="copy-notification" class="copy-notification hidden">
        âœ“ Meeting link copied!
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay hidden">
    <div class="spinner"></div>
    <p id="loading-text">Loading...</p>
  </div>

  <!-- Error Modal -->
  <div id="error-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Error</h3>
      <p id="error-text">An error occurred</p>
      <button id="btn-error-close" class="btn btn-primary">Close</button>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="js/rtc-config.js"></script>
  <script src="js/media-manager.js"></script>
  <script src="js/webrtc.js"></script>
  <script src="js/ui-manager.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
